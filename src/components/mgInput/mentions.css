.comment-mentions {
  position: relative;
}

/* 确保输入框文本正常显示 */
.comment-mentions textarea {
  color: inherit;
}

/* 高亮 @ 用户名 - 使用 Ant Design Mentions 组件的标准类名 */
.comment-mentions .ant-mentions-measure .ant-mentions-mention,
.comment-mentions .ant-mentions-measure span.ant-mentions-mention,
.comment-mentions .ant-mentions-measure mark.ant-mentions-mention {
  color: rgb(124, 58, 237) !important;
  font-weight: 500;
  background-color: transparent !important;
}

/* 暗色模式下的高亮 */
.dark .comment-mentions .ant-mentions-measure .ant-mentions-mention,
.dark .comment-mentions .ant-mentions-measure span.ant-mentions-mention,
.dark .comment-mentions .ant-mentions-measure mark.ant-mentions-mention {
  color: rgb(167, 139, 250) !important;
}

/* 匹配所有可能的 @ 用户名元素位置（通用选择器） */
.comment-mentions .ant-mentions-mention {
  color: rgb(124, 58, 237) !important;
  font-weight: 500;
  background-color: transparent !important;
}

.dark .comment-mentions .ant-mentions-mention {
  color: rgb(167, 139, 250) !important;
}

/* 使用主题色变量（如果可用） */
.comment-mentions .ant-mentions-measure .ant-mentions-mention {
  color: var(--color-primary-600, rgb(124, 58, 237)) !important;
}

.dark .comment-mentions .ant-mentions-measure .ant-mentions-mention {
  color: var(--color-primary-400, rgb(167, 139, 250)) !important;
}

/* 如果 Mentions 使用其他元素结构，也匹配 */
.comment-mentions .ant-mentions-measure [class*="mention"],
.comment-mentions .ant-mentions-measure [data-mention] {
  color: rgb(124, 58, 237) !important;
  font-weight: 500;
}

.dark .comment-mentions .ant-mentions-measure [class*="mention"],
.dark .comment-mentions .ant-mentions-measure [data-mention] {
  color: rgb(167, 139, 250) !important;
}

/* 下拉无数据时隐藏空白长条和整个下拉菜单 */
.ant-mentions-dropdown .ant-mentions-dropdown-menu:empty,
.ant-mentions-dropdown:has(.ant-mentions-dropdown-menu:empty) {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* 当没有选项时，隐藏下拉菜单 */
.ant-mentions-dropdown .ant-empty {
  display: none !important;
}

/* 当菜单项数量为0时，隐藏整个下拉框 */
.ant-mentions-dropdown:has(.ant-mentions-dropdown-menu-item:only-child.ant-mentions-dropdown-menu-item-empty),
.ant-mentions-dropdown .ant-mentions-dropdown-menu:not(:has(.ant-mentions-dropdown-menu-item:not(.ant-mentions-dropdown-menu-item-empty))) {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* 当没有有效的菜单项时，隐藏下拉框 */
.ant-mentions-dropdown[style*="display: none"],
.ant-mentions-dropdown-hidden {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* 隐藏空的下拉菜单容器 */
.ant-mentions-dropdown:not(:has(.ant-mentions-dropdown-menu-item:not(.ant-mentions-dropdown-menu-item-empty))) {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* 强制隐藏空的下拉框（通过检查文本内容） */
.ant-mentions-dropdown:has(.ant-mentions-dropdown-menu:empty),
.ant-mentions-dropdown .ant-mentions-dropdown-menu:empty {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}


